<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk" version="4.0"/>
  <requires lib="Adw" version="1.0"/>

      <object class="GtkApplicationWindow" id="main_window">
        <property name="title">Pi Camera</property>
        <property name="default-width">800</property>
        <property name="default-height">480</property>
        <property name="resizable">False</property>
        <child>
          <object class="GtkStack" id="main_stack">
            <property name="transition-type">slide-left-right</property>
            <property name="transition-duration">300</property>
            
            <!-- HOME SCREEN -->
            <child>
              <object class="GtkStackPage">
                <property name="name">home</property>
                <property name="child">
                  <object class="GtkOverlay" id="home_overlay">
                    <!-- Camera Preview Background -->
                    <property name="child">
                      <object class="GtkPicture" id="camera_preview">
                        <property name="width-request">800</property>
                        <property name="height-request">480</property>
                        <property name="content-fit">cover</property>
                        <property name="can-shrink">False</property>
                      </object>
                    </property>
                    
                    <!-- Top Bar Overlay -->
                    <child type="overlay">
                      <object class="GtkBox" id="top_bar">
                        <property name="orientation">horizontal</property>
                        <property name="spacing">10</property>
                        <property name="margin-top">20</property>
                        <property name="margin-start">20</property>
                        <property name="margin-end">20</property>
                        <property name="halign">fill</property>
                        <property name="valign">start</property>
                        
                        <!-- Gallery Button -->
                        <child>
                          <object class="GtkButton" id="gallery_btn">
                            <property name="width-request">60</property>
                            <property name="height-request">60</property>
                            <property name="halign">start</property>
                            <style>
                              <class name="circular"/>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage">
                                <property name="icon-name">folder-pictures-symbolic</property>
                                <property name="icon-size">large</property>
                              </object>
                            </child>
                          </object>
                        </child>
                        
                        <!-- Spacer -->
                        <child>
                          <object class="GtkBox">
                            <property name="hexpand">True</property>
                          </object>
                        </child>
                        
                        <!-- Recording Indicator (Hidden by default) -->
                        <child>
                          <object class="GtkBox" id="recording_indicator">
                            <property name="orientation">horizontal</property>
                            <property name="spacing">8</property>
                            <property name="visible">False</property>
                            <style>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage">
                                <property name="icon-name">media-record-symbolic</property>
                                <property name="icon-size">normal</property>
                              </object>
                            </child>
                            <child>
                              <object class="GtkLabel" id="recording_time">
                                <property name="text">00:00</property>
                              </object>
                            </child>
                          </object>
                        </child>
                        
                        <!-- Settings Button -->
                        <child>
                          <object class="GtkButton" id="settings_btn">
                            <property name="width-request">60</property>
                            <property name="height-request">60</property>
                            <property name="halign">end</property>
                            <style>
                              <class name="circular"/>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage">
                                <property name="icon-name">preferences-system-symbolic</property>
                                <property name="icon-size">large</property>
                              </object>
                            </child>
                          </object>
                        </child>
                      </object>
                    </child>
                    
                    <!-- Bottom Controls Overlay -->
                    <child type="overlay">
                      <object class="GtkBox" id="bottom_controls">
                        <property name="orientation">horizontal</property>
                        <property name="spacing">40</property>
                        <property name="margin-bottom">40</property>
                        <property name="margin-start">40</property>
                        <property name="margin-end">40</property>
                        <property name="halign">fill</property>
                        <property name="valign">end</property>
                        
                        <!-- Flash Toggle -->
                        <child>
                          <object class="GtkToggleButton" id="flash_btn">
                            <property name="width-request">50</property>
                            <property name="height-request">50</property>
                            <property name="halign">start</property>
                            <style>
                              <class name="circular"/>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage" id="flash_icon">
                                <property name="icon-name">weather-clear-symbolic</property>
                                <property name="icon-size">normal</property>
                              </object>
                            </child>
                          </object>
                        </child>
                        
                        <!-- Spacer -->
                        <child>
                          <object class="GtkBox">
                            <property name="hexpand">True</property>
                          </object>
                        </child>
                        
                        <!-- Main Capture Button -->
                        <child>
                          <object class="GtkButton" id="capture_btn">
                            <property name="width-request">80</property>
                            <property name="height-request">80</property>
                            <property name="halign">center</property>
                            <style>
                              <class name="circular"/>
                              <class name="suggested-action"/>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage" id="capture_icon">
                                <property name="icon-name">camera-photo-symbolic</property>
                                <property name="icon-size">large</property>
                              </object>
                            </child>
                          </object>
                        </child>
                        
                        <!-- Spacer -->
                        <child>
                          <object class="GtkBox">
                            <property name="hexpand">True</property>
                          </object>
                        </child>
                        
                        <!-- Video/Photo Toggle -->
                        <child>
                          <object class="GtkToggleButton" id="mode_toggle">
                            <property name="width-request">50</property>
                            <property name="height-request">50</property>
                            <property name="halign">end</property>
                            <style>
                              <class name="circular"/>
                              <class name="osd"/>
                            </style>
                            <child>
                              <object class="GtkImage" id="mode_icon">
                                <property name="icon-name">camera-video-symbolic</property>
                                <property name="icon-size">normal</property>
                              </object>
                            </child>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </child>
            
            <!-- GALLERY SCREEN -->
            <child>
              <object class="GtkStackPage">
                <property name="name">gallery</property>
                <property name="child">
                  <object class="GtkBox" id="gallery_container">
                    <property name="orientation">vertical</property>
                    
                    <!-- Gallery Header -->
                    <child>
                      <object class="GtkHeaderBar" id="gallery_header">
                        <child type="title"><object class="GtkLabel">
                            <property name="text">Gallery</property>
                            <style>
                              <class name="title"/>
                            </style>
                          </object></child>
                        
                        <!-- Back Button -->
                        <child type="start">
                          <object class="GtkButton" id="gallery_back_btn">
                            <property name="icon-name">go-previous-symbolic</property>
                          </object>
                        </child>
                        
                        <!-- Delete Button -->
                        <child type="end">
                          <object class="GtkButton" id="delete_btn">
                            <property name="icon-name">user-trash-symbolic</property>
                            <property name="sensitive">False</property>
                            <style>
                              <class name="destructive-action"/>
                            </style>
                          </object>
                        </child>
                      </object>
                    </child>
                    
                    <!-- Gallery Content Stack -->
                    <child>
                      <object class="GtkStack" id="gallery_stack">
                        <property name="vexpand">True</property>
                        
                        <!-- Grid View -->
                        <child>
                          <object class="GtkStackPage">
                            <property name="name">grid</property>
                            <property name="child">
                              <object class="GtkScrolledWindow" id="gallery_scroll">
                                <property name="hscrollbar-policy">never</property>
                                <property name="vscrollbar-policy">automatic</property>
                                <child>
                                  <object class="GtkGridView" id="gallery_grid">
                                    <property name="max-columns">4</property>
                                    <property name="min-columns">2</property>
                                    <property name="single-click-activate">True</property>
                                  </object>
                                </child>
                              </object>
                            </property>
                          </object>
                        </child>
                        
                        <!-- Full Screen View -->
                        <child>
                          <object class="GtkStackPage">
                            <property name="name">fullscreen</property>
                            <property name="child">
                              <object class="GtkOverlay" id="fullscreen_overlay">
                                <!-- Main Image -->
                                <property name="child">
                                  <object class="GtkPicture" id="fullscreen_image">
                                    <property name="content-fit">contain</property>
                                    <property name="can-shrink">True</property>
                                  </object>
                                </property>
                                
                                <!-- Navigation Controls -->
                                <child type="overlay">
                                  <object class="GtkBox" id="fullscreen_controls">
                                    <property name="orientation">horizontal</property>
                                    <property name="halign">fill</property>
                                    <property name="valign">center</property>
                                    <property name="margin-start">20</property>
                                    <property name="margin-end">20</property>
                                    
                                    <!-- Previous Button -->
                                    <child>
                                      <object class="GtkButton" id="prev_btn">
                                        <property name="width-request">50</property>
                                        <property name="height-request">50</property>
                                        <property name="halign">start</property>
                                        <style>
                                          <class name="circular"/>
                                          <class name="osd"/>
                                        </style>
                                        <child>
                                          <object class="GtkImage">
                                            <property name="icon-name">go-previous-symbolic</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Spacer -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="hexpand">True</property>
                                      </object>
                                    </child>
                                    
                                    <!-- Next Button -->
                                    <child>
                                      <object class="GtkButton" id="next_btn">
                                        <property name="width-request">50</property>
                                        <property name="height-request">50</property>
                                        <property name="halign">end</property>
                                        <style>
                                          <class name="circular"/>
                                          <class name="osd"/>
                                        </style>
                                        <child>
                                          <object class="GtkImage">
                                            <property name="icon-name">go-next-symbolic</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                                
                                <!-- Close Button -->
                                <child type="overlay">
                                  <object class="GtkButton" id="close_fullscreen_btn">
                                    <property name="width-request">40</property>
                                    <property name="height-request">40</property>
                                    <property name="halign">end</property>
                                    <property name="valign">start</property>
                                    <property name="margin-top">20</property>
                                    <property name="margin-end">20</property>
                                    <style>
                                      <class name="circular"/>
                                      <class name="osd"/>
                                    </style>
                                    <child>
                                      <object class="GtkImage">
                                        <property name="icon-name">window-close-symbolic</property>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </property>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </child>
            
            <!-- SETTINGS SCREEN -->
            <child>
              <object class="GtkStackPage">
                <property name="name">settings</property>
                <property name="child">
                  <object class="GtkBox" id="settings_container">
                    <property name="orientation">vertical</property>
                    
                    <!-- Settings Header -->
                    <child>
                      <object class="GtkHeaderBar" id="settings_header">
                        <child type="title"><object class="GtkLabel">
                            <property name="text">Settings</property>
                            <style>
                              <class name="title"/>
                            </style>
                          </object></child>
                        
                        <!-- Back Button -->
                        <child type="start">
                          <object class="GtkButton" id="settings_back_btn">
                            <property name="icon-name">go-previous-symbolic</property>
                          </object>
                        </child>
                      </object>
                    </child>
                    
                    <!-- Settings Notebook -->
                    <child>
                      <object class="GtkNotebook" id="settings_notebook">
                        <property name="vexpand">True</property>
                        <property name="scrollable">True</property>
                        
                        <!-- Camera Settings Tab -->
                        <child>
                          <object class="GtkNotebookPage">
                            <property name="tab">
                              <object class="GtkLabel">
                                <property name="text">Camera</property>
                              </object>
                            </property>
                            <property name="child">
                              <object class="GtkScrolledWindow">
                                <property name="hscrollbar-policy">never</property>
                                <child>
                                  <object class="GtkBox" id="camera_settings">
                                    <property name="orientation">vertical</property>
                                    <property name="spacing">20</property>
                                    <property name="margin-top">20</property>
                                    <property name="margin-bottom">20</property>
                                    <property name="margin-start">20</property>
                                    <property name="margin-end">20</property>
                                    
                                    <!-- Resolution Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">8</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Resolution</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkDropDown" id="resolution_dropdown">
                                            <property name="model">
                                              <object class="GtkStringList">
                                                <items>
                                                  <item>1920x1080 (Full HD)</item>
                                                  <item>1280x720 (HD)</item>
                                                  <item>640x480 (VGA)</item>
                                                  <item>3280x2464 (Max)</item>
                                                </items>
                                              </object>
                                            </property>
                                            <property name="selected">0</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Brightness Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">8</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Brightness</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkScale" id="brightness_scale">
                                            <property name="orientation">horizontal</property>
                                            <property name="adjustment">
                                              <object class="GtkAdjustment">
                                                <property name="lower">0</property>
                                                <property name="upper">100</property>
                                                <property name="value">50</property>
                                                <property name="step-increment">1</property>
                                                <property name="page-increment">10</property>
                                              </object>
                                            </property>
                                            <property name="draw-value">True</property>
                                            <property name="digits">0</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Contrast Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">8</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Contrast</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkScale" id="contrast_scale">
                                            <property name="orientation">horizontal</property>
                                            <property name="adjustment">
                                              <object class="GtkAdjustment">
                                                <property name="lower">-100</property>
                                                <property name="upper">100</property>
                                                <property name="value">0</property>
                                                <property name="step-increment">1</property>
                                                <property name="page-increment">10</property>
                                              </object>
                                            </property>
                                            <property name="draw-value">True</property>
                                            <property name="digits">0</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Flip Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">8</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Flip</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkBox">
                                            <property name="orientation">horizontal</property>
                                            <property name="spacing">10</property>
                                            <property name="homogeneous">True</property>
                                            <child>
                                              <object class="GtkToggleButton" id="flip_none">
                                                <property name="label">None</property>
                                                <property name="active">True</property>
                                                <property name="group">flip_none</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkToggleButton" id="flip_h">
                                                <property name="label">Horizontal</property>
                                                <property name="group">flip_none</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkToggleButton" id="flip_v">
                                                <property name="label">Vertical</property>
                                                <property name="group">flip_none</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkToggleButton" id="flip_both">
                                                <property name="label">Both</property>
                                                <property name="group">flip_none</property>
                                              </object>
                                            </child>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Filter Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">8</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Filter</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkDropDown" id="filter_dropdown">
                                            <property name="model">
                                              <object class="GtkStringList">
                                                <items>
                                                  <item>None</item>
                                                  <item>Sepia</item>
                                                  <item>Black and White</item>
                                                  <item>Vintage</item>
                                                  <item>Cool</item>
                                                  <item>Warm</item>
                                                </items>
                                              </object>
                                            </property>
                                            <property name="selected">0</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </property>
                          </object>
                        </child>
                        
                        <!-- General Settings Tab -->
                        <child>
                          <object class="GtkNotebookPage">
                            <property name="tab">
                              <object class="GtkLabel">
                                <property name="text">General</property>
                              </object>
                            </property>
                            <property name="child">
                              <object class="GtkScrolledWindow">
                                <property name="hscrollbar-policy">never</property>
                                <child>
                                  <object class="GtkBox" id="general_settings">
                                    <property name="orientation">vertical</property>
                                    <property name="spacing">20</property>
                                    <property name="margin-top">20</property>
                                    <property name="margin-bottom">20</property>
                                    <property name="margin-start">20</property>
                                    <property name="margin-end">20</property>
                                    
                                    <!-- Date & Time Setting -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">12</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Date and Time</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkBox">
                                            <property name="orientation">horizontal</property>
                                            <property name="spacing">10</property>
                                            <child>
                                              <object class="GtkSwitch" id="auto_datetime">
                                                <property name="active">True</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkLabel">
                                                <property name="text">Automatic</property>
                                              </object>
                                            </child>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkBox" id="manual_datetime">
                                            <property name="orientation">horizontal</property>
                                            <property name="spacing">10</property>
                                            <property name="sensitive">False</property>
                                            <child>
                                              <object class="GtkEntry" id="date_entry">
                                                <property name="placeholder-text">DD/MM/YYYY</property>
                                                <property name="hexpand">True</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkEntry" id="time_entry">
                                                <property name="placeholder-text">HH:MM</property>
                                                <property name="hexpand">True</property>
                                              </object>
                                            </child>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    
                                    <!-- Storage Info -->
                                    <child>
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <property name="spacing">12</property>
                                        <child>
                                          <object class="GtkLabel">
                                            <property name="text">Storage</property>
                                            <property name="halign">start</property>
                                            <style>
                                              <class name="heading"/>
                                            </style>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkBox">
                                            <property name="orientation">vertical</property>
                                            <property name="spacing">8</property>
                                            <child>
                                              <object class="GtkProgressBar" id="storage_bar">
                                                <property name="fraction">0.3</property>
                                                <property name="show-text">True</property>
                                                <property name="text">3.2 GB of 10.5 GB used</property>
                                              </object>
                                            </child>
                                            <child>
                                              <object class="GtkBox">
                                                <property name="orientation">horizontal</property>
                                                <property name="spacing">10</property>
                                                <child>
                                                  <object class="GtkLabel" id="photos_count">
                                                    <property name="text">Photos: 45</property>
                                                    <property name="halign">start</property>
                                                  </object>
                                                </child>
                                                <child>
                                                  <object class="GtkBox">
                                                    <property name="hexpand">True</property>
                                                  </object>
                                                </child>
                                                <child>
                                                  <object class="GtkLabel" id="videos_count">
                                                    <property name="text">Videos: 12</property>
                                                    <property name="halign">end</property>
                                                  </object>
                                                </child>
                                              </object>
                                            </child>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </property>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </child>
          </object>
        </child>
      </object>
</interface>
